<div class="row" style="padding-top: 20px;" infiniteScroll
		    [infiniteScrollDistance]="2"
		    [infiniteScrollUpDistance]="2"
		    [infiniteScrollThrottle]="500"
		    (scrolled)="onScrollDown()">
   <div class="col-md-3" style="margin:auto">
   </div>
   <div class="col-md-6 panel panel-default" style="margin:auto;background-color:white">
      <modal #modal (onDismiss)="dismissPostModal()" (onOpen)="cargaFormulario()">
         <modal-body>
            <form novalidate class="form-signin" #form="ngForm" (ngSubmit)="guardaRegistroPost(form)" *ngIf="!isFormLoading && isFormLoaded">
            <br/>
            <div class="row panel-body">
               <div class="col-md-12">
                  <md-input-container style="width:100%">
                     <textarea mdInput placeholder="¿Cuéntanos qué pasó?" fz-elastic rows="5" name="post" ngModel></textarea>
                  </md-input-container>
               </div>
            </div>
            <div class="flex-container wrap" style="align-items: center;justify-content: center;" >
               <div class="flex-item" *ngFor='let variable of variables'>
                  <label for="variable.id">{{variable.nombre}}*</label>
                  <ng-select id={{variable.id}} class="flex-item" placeholder="Seleccione" [options]="variable.opciones" [allowClear]="true" noFilter="true"
				  notFoundMsg="Sin resultados" name={{variable.nombreRegistro}} ngModel required [ngClass]="{'alert-error': variable.invalid && submitted}" (deselected)="onDeselectedVariable(variable.id)"
				  (selected)="onSelectedVariable(variable.id)">
				  </ng-select >
               </div>
            </div>
            <br/>
            <div class="row panel-body">
               <div class="col-md-12">
                  <label for="pensamiento" style="width:100%">¿Que piensas o pensaste acerca de esto? *</label>
                  <textarea id="pensamiento" style="width:100%" fz-elastic ngModel name="pensamiento" required #pensamiento="ngModel" alert-error [ngClass]="{'alert-error': pensamiento.errors && submitted}"></textarea>
               </div>
            </div>
            <div style="color:red" 
               *ngIf="!form.valid && submitted">
               Completar los campos obligatorios (*)
            </div>
            <div>
               <table width="100%">
				<tr>
					<td width="50%">
						<input type="submit" class="btn btn-info" value="Publicar" >
						<input type="button" class="btn btn-info" value="Cancelar" (click)="modal.dismiss()">
					</td>
					<td width="50%" align="right">
						<label class="btn btn-secondary"><input type="checkbox" autocomplete="off" name="oculto" ngModel>&nbsp;Ocultar</label>
					</td>
				</tr>
			   </table>
            </div>
            <br/>
            </form>
			<div class="spinner-message" style="width:100%;text-align:center;" *ngIf="isFormLoading">
				<md-spinner mode="indeterminate" style="margin:0 auto;"></md-spinner>
				<br/>
			</div>
         </modal-body>
      </modal>
      <post [registro]="registro" [pacienteSesion]="pacienteSesion" *ngFor='let registro of registros' (ocultar)=ocultarPost($event) (eliminar)=eliminarPost($event)> </post>
	  <div class="spinner-message" style="width:100%;text-align:center;" *ngIf="isPostsLoading">
		<md-spinner mode="indeterminate" style="margin:0 auto;"></md-spinner>
		<br/>
	  </div>
   </div>
   <div class="col-md-3" style="margin:auto">
   </div>
   <span style="width:100%;position: fixed;bottom:0%;text-align:right" >
   <a md-fab routerLink="." style="margin:20px;background-color:#81BEF7;" (click)="modal.open('lg')">
	<img src="assets/post.png" width="100%" height="100%"><img/>
   </a>
   </span>
</div>